

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Protocol Layer &mdash; stompest documentation - v2.0a1</title>
    
    <link rel="stylesheet" href="_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '',
        VERSION:     '2.0a1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="stompest documentation - v2.0a1" href="index.html" />
    <link rel="next" title="Error Codes" href="error.html" />
    <link rel="prev" title="Asynchronous Client" href="async.html" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="error.html" title="Error Codes"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="async.html" title="Asynchronous Client"
             accesskey="P">previous</a> |</li>
        <li><a href="index.html">stompest documentation - v2.0a1</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Protocol Layer</a><ul>
<li><a class="reference internal" href="#module-stompest.protocol.failover">Configuration and Failover URI Scheme</a></li>
<li><a class="reference internal" href="#module-stompest.protocol.session">Session State</a></li>
<li><a class="reference internal" href="#module-stompest.protocol.frame">STOMP Frame Representation</a></li>
<li><a class="reference internal" href="#module-stompest.protocol.commands">Commands</a></li>
<li><a class="reference internal" href="#module-stompest.protocol.spec">STOMP Protocol Specification</a></li>
<li><a class="reference internal" href="#module-stompest.protocol.parser">Wire-Level Parser</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="async.html"
                        title="previous chapter">Asynchronous Client</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="error.html"
                        title="next chapter">Error Codes</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="_sources/protocol.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="protocol-layer">
<h1>Protocol Layer<a class="headerlink" href="#protocol-layer" title="Permalink to this headline">¶</a></h1>
<div class="section" id="module-stompest.protocol.failover">
<span id="configuration-and-failover-uri-scheme"></span><h2>Configuration and Failover URI Scheme<a class="headerlink" href="#module-stompest.protocol.failover" title="Permalink to this headline">¶</a></h2>
<dl class="class">
<dt id="stompest.protocol.failover.StompConfig">
<em class="property">class </em><tt class="descclassname">stompest.protocol.failover.</tt><tt class="descname">StompConfig</tt><big>(</big><em>uri</em>, <em>login=''</em>, <em>passcode=''</em>, <em>version=None</em>, <em>check=True</em><big>)</big><a class="headerlink" href="#stompest.protocol.failover.StompConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>This configuration object contains those parameters which are common to both clients (sync and async) and are needed to establish a STOMP connection. All parameters are available as attributes with the same name of this object.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>uri</strong> &#8211; A failover URI as it is accepted by <a class="reference internal" href="#stompest.protocol.failover.StompFailoverUri" title="stompest.protocol.failover.StompFailoverUri"><tt class="xref py py-class docutils literal"><span class="pre">StompFailoverUri</span></tt></a>.</li>
<li><strong>login</strong> &#8211; The login for the STOMP brokers.</li>
<li><strong>passcode</strong> &#8211; The passcode for the STOMP brokers.</li>
<li><strong>version</strong> &#8211; The highest STOMP protocol version this client may use. If <tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt>, <strong>version</strong> defaults to <tt class="xref py py-attr docutils literal"><span class="pre">StompSpec.DEFAULT_VERSION</span></tt> (currently <tt class="xref py py-obj docutils literal"><span class="pre">'1.0'</span></tt>, but this may change in upcoming stompest releases)</li>
<li><strong>check</strong> &#8211; Decides whether the <tt class="xref py py-class docutils literal"><span class="pre">StompSession</span></tt> object which is used to represent the STOMP sesion should be strict about the session&#8217;s state: (e.g., whether to allow calling <tt class="xref py py-meth docutils literal"><span class="pre">StompSession.send()</span></tt> when disconnected).</li>
</ul>
</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Login and passcode have to be the same for all brokers becuse they are not part of the failover URI scheme.</p>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stompest.protocol.failover.StompFailoverProtocol" title="stompest.protocol.failover.StompFailoverProtocol"><tt class="xref py py-class docutils literal"><span class="pre">StompFailoverProtocol</span></tt></a>, <a class="reference internal" href="#stompest.protocol.failover.StompFailoverUri" title="stompest.protocol.failover.StompFailoverUri"><tt class="xref py py-class docutils literal"><span class="pre">StompFailoverUri</span></tt></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="stompest.protocol.failover.StompFailoverProtocol">
<em class="property">class </em><tt class="descclassname">stompest.protocol.failover.</tt><tt class="descname">StompFailoverProtocol</tt><big>(</big><em>uri</em><big>)</big><a class="headerlink" href="#stompest.protocol.failover.StompFailoverProtocol" title="Permalink to this definition">¶</a></dt>
<dd><p>This object is a parser for the failover URI scheme used in stompest. Looping over this object, you can produce a series of tuples (broker, delay in s). When the URI does not allow further failover, a <tt class="xref py py-class docutils literal"><span class="pre">StompConnectTimeout</span></tt> error is raised.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>uri</strong> &#8211; A failover URI.</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stompest.protocol</span> <span class="kn">import</span> <span class="n">StompFailoverProtocol</span>
<span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stompest.error</span> <span class="kn">import</span> <span class="n">StompConnectTimeout</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">failover</span> <span class="o">=</span> <span class="n">StompFailoverProtocol</span><span class="p">(</span><span class="s">&#39;failover:(tcp://remote1:61615,tcp://localhost:61616)?randomize=false,startupMaxReconnectAttempts=3,initialReconnectDelay=7,maxReconnectDelay=8,maxReconnectAttempts=0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="p">(</span><span class="n">broker</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span> <span class="ow">in</span> <span class="n">failover</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span> <span class="s">&#39;broker: </span><span class="si">%s</span><span class="s">, delay: </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">broker</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>                                                                       
<span class="gp">... </span><span class="k">except</span> <span class="n">StompConnectTimeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">&#39;timeout: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">e</span>
<span class="gp">... </span>
<span class="go">broker: {&#39;host&#39;: &#39;remote1&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61615}, delay: 0.000000</span>
<span class="go">broker: {&#39;host&#39;: &#39;localhost&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61616}, delay: 0.007000</span>
<span class="go">broker: {&#39;host&#39;: &#39;remote1&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61615}, delay: 0.008000</span>
<span class="go">broker: {&#39;host&#39;: &#39;localhost&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61616}, delay: 0.008000</span>
<span class="go">timeout: Reconnect timeout: 3 attempts</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">try</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">for</span> <span class="p">(</span><span class="n">broker</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span> <span class="ow">in</span> <span class="n">failover</span><span class="p">:</span>
<span class="gp">... </span>        <span class="k">print</span> <span class="s">&#39;broker: </span><span class="si">%s</span><span class="s">, delay: </span><span class="si">%f</span><span class="s">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">broker</span><span class="p">,</span> <span class="n">delay</span><span class="p">)</span>
<span class="gp">... </span><span class="k">except</span> <span class="n">StompConnectTimeout</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
<span class="gp">... </span>    <span class="k">print</span> <span class="s">&#39;timeout: </span><span class="si">%s</span><span class="s">&#39;</span> <span class="o">%</span> <span class="n">e</span>
<span class="gp">... </span>
<span class="go">broker: {&#39;host&#39;: &#39;remote1&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61615}, delay: 0.000000</span>
<span class="go">timeout: Reconnect timeout: 0 attempts</span>
</pre></div>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stompest.protocol.failover.StompFailoverUri" title="stompest.protocol.failover.StompFailoverUri"><tt class="xref py py-class docutils literal"><span class="pre">StompFailoverUri</span></tt></a></p>
</div>
</dd></dl>

<dl class="class">
<dt id="stompest.protocol.failover.StompFailoverUri">
<em class="property">class </em><tt class="descclassname">stompest.protocol.failover.</tt><tt class="descname">StompFailoverUri</tt><big>(</big><em>uri</em><big>)</big><a class="headerlink" href="#stompest.protocol.failover.StompFailoverUri" title="Permalink to this definition">¶</a></dt>
<dd><p>This object is a parser for the failover URI scheme used in stompest. The parsed parameters are available in the attributes <tt class="xref py py-attr docutils literal"><span class="pre">brokers</span></tt> and <tt class="xref py py-attr docutils literal"><span class="pre">options</span></tt>. The Failover transport syntax is very close to the one used in ActiveMQ. Its basic form is:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;failover:(uri1,...,uriN)?transportOptions&#39;</span>
</pre></div>
</div>
<p>or:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="s">&#39;failover:uri1,...,uriN&#39;</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>uri</strong> &#8211; A failover URI.</td>
</tr>
</tbody>
</table>
<p><strong>Example:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">stompest.protocol</span> <span class="kn">import</span> <span class="n">StompFailoverUri</span>    
<span class="gp">&gt;&gt;&gt; </span><span class="n">uri</span> <span class="o">=</span> <span class="n">StompFailoverUri</span><span class="p">(</span><span class="s">&#39;failover:(tcp://remote1:61615,tcp://localhost:61616)?randomize=false,startupMaxReconnectAttempts=3,initialReconnectDelay=7,maxReconnectDelay=8,maxReconnectAttempts=0&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">uri</span><span class="o">.</span><span class="n">brokers</span>
<span class="go">[{&#39;host&#39;: &#39;remote1&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61615}, {&#39;host&#39;: &#39;localhost&#39;, &#39;protocol&#39;: &#39;tcp&#39;, &#39;port&#39;: 61616}]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="k">print</span> <span class="n">uri</span><span class="o">.</span><span class="n">options</span>
<span class="go">{&#39;initialReconnectDelay&#39;: 7, &#39;maxReconnectDelay&#39;: 8, &#39;backOffMultiplier&#39;: 2.0, &#39;startupMaxReconnectAttempts&#39;: 3, &#39;priorityBackup&#39;: False, &#39;maxReconnectAttempts&#39;: 0, &#39;reconnectDelayJitter&#39;: 0, &#39;useExponentialBackOff&#39;: True, &#39;randomize&#39;: False}</span>
</pre></div>
</div>
<p><strong>Supported Options:</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="3%" />
<col width="5%" />
<col width="82%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">option</th>
<th class="head">type</th>
<th class="head">default</th>
<th class="head">description</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><em>initialReconnectDelay</em></td>
<td>int</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">10</span></tt></td>
<td>how long to wait before the first reconnect attempt (in ms)</td>
</tr>
<tr class="row-odd"><td><em>maxReconnectDelay</em></td>
<td>int</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">30000</span></tt></td>
<td>the maximum amount of time we ever wait between reconnect attempts (in ms)</td>
</tr>
<tr class="row-even"><td><em>useExponentialBackOff</em></td>
<td>bool</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></td>
<td>should an exponential backoff be used between reconnect attempts</td>
</tr>
<tr class="row-odd"><td><em>backOffMultiplier</em></td>
<td>float</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">2.0</span></tt></td>
<td>the exponent used in the exponential backoff attempts</td>
</tr>
<tr class="row-even"><td><em>maxReconnectAttempts</em></td>
<td>int</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">-1</span></tt></td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">-1</span></tt> means retry forever
<tt class="xref py py-obj docutils literal"><span class="pre">0</span></tt> means don&#8217;t retry (only try connection once but no retry)
<tt class="xref py py-obj docutils literal"><span class="pre">&gt;</span> <span class="pre">0</span></tt> means the maximum number of reconnect attempts before an error is sent back to the client</td>
</tr>
<tr class="row-odd"><td><em>startupMaxReconnectAttempts</em></td>
<td>int</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">0</span></tt></td>
<td>if not <tt class="xref py py-obj docutils literal"><span class="pre">0</span></tt>, then this is the maximum number of reconnect attempts before an error is sent back to the client on the first attempt by the client to start a connection, once connected the <em>maxReconnectAttempts</em> option takes precedence</td>
</tr>
<tr class="row-even"><td><em>reconnectDelayJitter</em></td>
<td>int</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">0</span></tt></td>
<td>jitter in ms by which reconnect delay is blurred in order to avoid stampeding</td>
</tr>
<tr class="row-odd"><td><em>randomize</em></td>
<td>bool</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">True</span></tt></td>
<td>use a random algorithm to choose the the URI to use for reconnect from the list provided</td>
</tr>
<tr class="row-even"><td><em>priorityBackup</em></td>
<td>bool</td>
<td><tt class="xref py py-obj docutils literal"><span class="pre">False</span></tt></td>
<td>if set, prefer local connections to remote connections</td>
</tr>
</tbody>
</table>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stompest.protocol.failover.StompFailoverProtocol" title="stompest.protocol.failover.StompFailoverProtocol"><tt class="xref py py-class docutils literal"><span class="pre">StompFailoverProtocol</span></tt></a>, <a class="reference external" href="http://activemq.apache.org/failover-transport-reference.html">failover transport</a> of ActiveMQ.</p>
</div>
</dd></dl>

</div>
<div class="section" id="module-stompest.protocol.session">
<span id="session-state"></span><h2>Session State<a class="headerlink" href="#module-stompest.protocol.session" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-stompest.protocol.frame">
<span id="stomp-frame-representation"></span><h2>STOMP Frame Representation<a class="headerlink" href="#module-stompest.protocol.frame" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-stompest.protocol.commands">
<span id="commands"></span><h2>Commands<a class="headerlink" href="#module-stompest.protocol.commands" title="Permalink to this headline">¶</a></h2>
<p>This module implements a low-level and stateless API for all commands of the STOMP protocol version supported by stompest. All STOMP command frames are represented as <tt class="xref py py-class docutils literal"><span class="pre">StompFrame</span></tt> objects. It forms the basis for <tt class="xref py py-class docutils literal"><span class="pre">StompSession</span></tt> which represents the full state of an abstract STOMP protocol session and (via <tt class="xref py py-class docutils literal"><span class="pre">StompSession</span></tt>) of both high-level STOMP clients. You can use the commands API independently of other stompest modules to roll your own STOMP related functionality.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Whenever you have to pass a <em>version</em> parameter to a command, this is because the behavior of that command depends on the STOMP protocol version of your current session. The default version is the value of <tt class="xref py py-attr docutils literal"><span class="pre">StompSpec.DEFAULT_VERSION</span></tt>, which is currently <tt class="xref py py-obj docutils literal"><span class="pre">'1.0'</span></tt> but may change in upcoming versions of stompest (and by you, if you wish to override it). Any command which does not conform to the STOMP protocol version in question will result in a <tt class="xref py py-class docutils literal"><span class="pre">StompProtocolError</span></tt>.</p>
</div>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Specification of STOMP protocols <a class="reference external" href="http://stomp.github.com//stomp-specification-1.0.html">1.0</a> and <a class="reference external" href="http://stomp.github.com//stomp-specification-1.1.html">1.1</a>, your favorite broker&#8217;s documentation for additional STOMP headers.</p>
</div>
<dl class="function">
<dt id="stompest.protocol.commands.abort">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">abort</tt><big>(</big><em>transaction</em>, <em>receipt=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <em>ABORT</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>transaction</strong> &#8211; The id of the transaction.</li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.ack">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">ack</tt><big>(</big><em>frame</em>, <em>receipt=None</em>, <em>version=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.ack" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <em>ACK</em> frame for a received <em>MESSAGE</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> &#8211; The <tt class="xref py py-class docutils literal"><span class="pre">StompFrame</span></tt> object representing the <em>MESSAGE</em> frame we wish to ack.</li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-func docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.begin">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">begin</tt><big>(</big><em>transaction</em>, <em>receipt=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.begin" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>BEGIN</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>transaction</strong> &#8211; The id of the transaction.</li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.commit">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">commit</tt><big>(</big><em>transaction</em>, <em>receipt=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.commit" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>COMMIT</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>transaction</strong> &#8211; The id of the transaction.</li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.connect">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">connect</tt><big>(</big><em>login=None</em>, <em>passcode=None</em>, <em>headers=None</em>, <em>versions=None</em>, <em>host=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.connect" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>CONNECT</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>login</strong> &#8211; The <em>login</em> header.</li>
<li><strong>passcode</strong> &#8211; The <em>passcode</em> header.</li>
<li><strong>headers</strong> &#8211; Additional STOMP headers. Example: <tt class="docutils literal"><span class="pre">headers={'client-id':</span> <span class="pre">'me-myself-and-i'}</span></tt></li>
<li><strong>versions</strong> &#8211; The STOMP versions we wish to support. The default is <tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt>, which means that we will offer the broker to accept any version prior or equal to the default STOMP protocol version. Example: <tt class="docutils literal"><span class="pre">versions=['1.0',</span> <span class="pre">'1.1']</span></tt></li>
<li><strong>host</strong> &#8211; The <em>host</em> header which gives this client a human readable name on the broker side. Example: <tt class="docutils literal"><span class="pre">host=moon</span></tt></li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.connected">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">connected</tt><big>(</big><em>frame</em>, <em>versions=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.connected" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <em>CONNECTED</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>versions</strong> &#8211; The same <em>versions</em> parameter you used to create the <em>CONNECT</em> frame.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.disconnect">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">disconnect</tt><big>(</big><em>receipt=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.disconnect" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>DISCONNECT</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>receipt</strong> &#8211; Add a <em>receipt</em> header with this id to request a <em>RECEIPT</em> frame from the broker. If <tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt>, no such header is added. Example: <tt class="docutils literal"><span class="pre">receipt='tell-me-when-you-got-that-message'</span></tt></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.error">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">error</tt><big>(</big><em>frame</em>, <em>version</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.error" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle an <em>ERROR</em> frame. Does not really do anything except checking that this is an <em>ERROR</em> frame.</p>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.message">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">message</tt><big>(</big><em>frame</em>, <em>version</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.message" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <em>MESSAGE</em> frame. Returns a token which you can use to match this message to its subscription.</p>
<div class="admonition-see-also admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last"><a class="reference internal" href="#stompest.protocol.commands.subscribe" title="stompest.protocol.commands.subscribe"><tt class="xref py py-func docutils literal"><span class="pre">subscribe()</span></tt></a>.</p>
</div>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.nack">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">nack</tt><big>(</big><em>frame</em>, <em>receipt=None</em>, <em>version=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.nack" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>NACK</em> frame for a received <em>MESSAGE</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>frame</strong> &#8211; The <tt class="xref py py-class docutils literal"><span class="pre">StompFrame</span></tt> object representing the <em>MESSAGE</em> frame we wish to nack.</li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-func docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.receipt">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">receipt</tt><big>(</big><em>frame</em>, <em>version</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.receipt" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a <em>RECEIPT</em> frame. Returns the receipt id which you can use to match this receipt to the command that requested it.</p>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.send">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">send</tt><big>(</big><em>destination</em>, <em>body=''</em>, <em>headers=None</em>, <em>receipt=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.send" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>SEND</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>destination</strong> &#8211; Destination for the frame. Example: <tt class="docutils literal"><span class="pre">destination='/queue/somewhere'</span></tt></li>
<li><strong>body</strong> &#8211; Message body. Binary content is allowed but must be accompanied by the STOMP header <em>content-length</em> which specifies the number of bytes in the message body.</li>
<li><strong>headers</strong> &#8211; Additional STOMP headers. Example: <tt class="docutils literal"><span class="pre">headers={'content-length':</span> <span class="pre">'1001'}</span></tt></li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-func docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.stomp">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">stomp</tt><big>(</big><em>versions</em>, <em>host</em>, <em>login=None</em>, <em>passcode=None</em>, <em>headers=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.stomp" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a <em>STOMP</em> frame. Not supported in STOMP protocol 1.0, synonymous to <a class="reference internal" href="#stompest.protocol.commands.connect" title="stompest.protocol.commands.connect"><tt class="xref py py-func docutils literal"><span class="pre">connect()</span></tt></a> for STOMP protocol 1.1 and higher.</p>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.subscribe">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">subscribe</tt><big>(</big><em>destination</em>, <em>headers</em>, <em>receipt=None</em>, <em>version=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.subscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a pair (frame, token) of a <em>SUBSCRIBE</em> frame and a token which you have to keep if you wish to match incoming <em>MESSAGE</em> frames to this subscription or to <a class="reference internal" href="#stompest.protocol.commands.unsubscribe" title="stompest.protocol.commands.unsubscribe"><tt class="xref py py-func docutils literal"><span class="pre">unsubscribe()</span></tt></a> later.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>destination</strong> &#8211; Destination for the subscription. Example: <tt class="docutils literal"><span class="pre">destination='/topic/news'</span></tt></li>
<li><strong>headers</strong> &#8211; Additional STOMP headers. Example: <tt class="docutils literal"><span class="pre">headers={'activemq.prefetchSize':</span> <span class="pre">'100'}</span></tt></li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-func docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.unsubscribe">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">unsubscribe</tt><big>(</big><em>token</em>, <em>receipt=None</em>, <em>version=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.unsubscribe" title="Permalink to this definition">¶</a></dt>
<dd><p>Create an <em>UNSUBSCRIBE</em> frame.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>token</strong> &#8211; The result of the <a class="reference internal" href="#stompest.protocol.commands.subscribe" title="stompest.protocol.commands.subscribe"><tt class="xref py py-func docutils literal"><span class="pre">subscribe()</span></tt></a> command which you used to initiate the subscription in question.</li>
<li><strong>receipt</strong> &#8211; See <a class="reference internal" href="#stompest.protocol.commands.disconnect" title="stompest.protocol.commands.disconnect"><tt class="xref py py-meth docutils literal"><span class="pre">disconnect()</span></tt></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.version">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">version</tt><big>(</big><em>version=None</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.version" title="Permalink to this definition">¶</a></dt>
<dd><p>Check whether <em>version</em> is a valid STOMP protocol version.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>version</strong> &#8211; A candidate version, or <tt class="xref py py-obj docutils literal"><span class="pre">None</span></tt> (which is equivalent to the value of <tt class="xref py py-attr docutils literal"><span class="pre">StompSpec.DEFAULT_VERSION</span></tt>).</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="stompest.protocol.commands.versions">
<tt class="descclassname">stompest.protocol.commands.</tt><tt class="descname">versions</tt><big>(</big><em>version</em><big>)</big><a class="headerlink" href="#stompest.protocol.commands.versions" title="Permalink to this definition">¶</a></dt>
<dd><p>Obtain all versions prior or equal to <em>version</em>.</p>
</dd></dl>

</div>
<div class="section" id="module-stompest.protocol.spec">
<span id="stomp-protocol-specification"></span><h2>STOMP Protocol Specification<a class="headerlink" href="#module-stompest.protocol.spec" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-stompest.protocol.parser">
<span id="wire-level-parser"></span><h2>Wire-Level Parser<a class="headerlink" href="#module-stompest.protocol.parser" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="error.html" title="Error Codes"
             >next</a> |</li>
        <li class="right" >
          <a href="async.html" title="Asynchronous Client"
             >previous</a> |</li>
        <li><a href="index.html">stompest documentation - v2.0a1</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2012, Roger Hoover, Jan Müller.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.1.3.
    </div>
  </body>
</html>